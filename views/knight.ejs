<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess</title>
    <style>
        #outer{
            height: 650px;
            width: 650px;
            margin: auto;
            margin-top: 50px;
            border: 1px solid black;
        }
        .row{
            height:12.5%;
            width: 100%;
            display: flex;
        }
        .cell{
            height:100%;
            width:12.5%;
            box-sizing: border-box;
        }
        .black{
            background-color: black;
        }
        .white{
            background-color: white;
        }
    </style>
</head>
<body>
    <div id = 'outer'>
        <% for (let i=0;i<8;i++) {%>
            <div class = 'row'>
                <% for(let j=0;j<8;j++) {%>
                    <% if((i+j)%2 == 0) {%>
                        <div class = 'white cell' onclick='func(<%=i*8 + j%>)'></div>
                    <% } else {%>
                        <div class = 'black cell' onclick='func(<%=i*8 + j%>)'></div>
                    <% } %>
                <% } %>
            </div>
        <% } %>
    </div>
    <script>
        const block = document.getElementsByClassName('cell');
        const func = function(t){
            for(let i=0;i<8;i++){
                for(let j=0;j<8;j++){
                    if((i+j)%2 == 0)
                        block[i*8+j].style = 'background-color: white';
                    else
                        block[i*8+j].style = 'background-color: black';
                }
            }
            block[t].style = 'border: 5px solid red';
            let i = Math.floor(t/8), j = t%8;
            if((i+2) <= 7 && j+1 <= 7){
                block[(i+2)*8 + j + 1].style = 'background-color: red';
            }
            if((i+2) <=7 && j-1>=0){
                block[(i+2)*8 + j-1].style = 'background-color: red';
            }
            if((i+1) < 8 && j+2 <= 7){
                block[(i+1)*8 + j +2].style = 'background-color: red';
            }
            if((i+1) <= 7 && j-2 >= 0){
                block[(i+1)*8+j-2].style = 'background-color: red';
            }
            if((i-2) >= 0 && j+1 <= 7){
                block[(i-2)*8 + j + 1].style = 'background-color: red';
            }
            if((i-2) >= 0 && j-1>=0){
                block[(i-2)*8 + j-1].style = 'background-color: red';
            }
            if((i-1) >= 0 && j+2 <= 7){
                block[(i-1)*8 + j +2].style = 'background-color: red';
            }
            if((i-1) >=0 && j-2 >= 0){
                block[(i-1)*8+j-2].style = 'background-color: red';
            }
        }
    </script>
</body>
</html>